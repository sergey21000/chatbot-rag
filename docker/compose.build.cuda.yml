services:
  gradio-app:
    extends:
      file: compose.base.yml
      service: gradio-app
    build:
      context: ..
      dockerfile: Dockerfile-cuda-nvidia  # or Dockerfile-cuda-pytorch
    image: chatbot-rag:cuda
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]